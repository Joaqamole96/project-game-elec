// BiomeModel.cs

[System.Serializable]
public class BiomeModel
{
    public string Name;
    public int MinLevel;
    public int MaxLevel;
    public BiomeModel(string name, int minLevel, int maxLevel)
    {
        Name = name;
        MinLevel = minLevel;
        MaxLevel = maxLevel;
    }
}

using System.Collections.Generic;
using UnityEngine;

public class CorridorModel
{
    public List<Vector2Int> Tiles;
    public RoomModel StartRoom;
    public RoomModel EndRoom;
    public DoorModel StartDoor;
    public DoorModel EndDoor;

    public CorridorModel(List<Vector2Int> tiles, RoomModel startRoom, RoomModel endRoom, DoorModel startDoor, DoorModel endDoor)
    {
        Tiles = tiles;
        StartRoom = startRoom;
        EndRoom = endRoom;
        StartDoor = startDoor;
        EndDoor = endDoor;
    }
}

using UnityEngine;

public readonly struct DoorModel
{
    public readonly Vector2Int Position;
    public readonly DoorState State;
    public readonly DoorKey Key;

    public DoorModel(Vector2Int position, DoorState state = DoorState.Closed, DoorKey key = DoorKey.None)
    {
        Position = position;
        State = state;
        Key = key;
    }
}

using UnityEngine;

public readonly struct FloorModel
{
    public readonly Vector2Int Position;
    public readonly FloorType Type;

    public FloorModel(Vector2Int position, FloorType type)
    {
        Position = position;
        Type = type;
    }
}

using System.Collections.Generic;
using UnityEngine;

public class LevelModel
{
    public const int BASE_FLOOR_SIZE = 100;
    public const int MAX_FLOOR_SIZE = 500;
    
    public int Width;
    public int Height;
    public BoundsInt OverallBounds;
    public List<RoomModel> Rooms = new();
    public List<CorridorModel> Corridors = new();
    public HashSet<Vector2Int> AllFloorTiles = new();
    public HashSet<Vector2Int> AllWallTiles = new();
    public HashSet<Vector2Int> AllDoorTiles = new();
    public Dictionary<Vector2Int, DoorModel> GameplayDoors = new();
    public Dictionary<Vector2Int, RoomModel> TileToRoomMap = new();
    public Dictionary<Vector2Int, CorridorModel> TileToCorridorMap = new();
    public Dictionary<RoomModel, List<RoomModel>> RoomGraph = new();
    public bool IsInitialized = false;

    public LevelModel(int width, int height)
    {
        Width = width;
        Height = height;
    }
}

using System.Collections.Generic;
using UnityEngine;

public class PartitionModel
{
    public static readonly int MIN_SIZE = 20;
    public static readonly int MAX_SIZE = 35;
    
    public RectInt Bounds;
    public PartitionModel LeftChild;
    public PartitionModel RightChild;
    public RoomModel Room;
    public List<PartitionModel> Neighbors = new();
    public int Width => Bounds.width;
    public int Height => Bounds.height;
    public int X => Bounds.x;
    public int Y => Bounds.y;
    public bool IsLeaf => LeftChild == null && RightChild == null;

    public PartitionModel(RectInt bounds)
    {
        Bounds = bounds;
    }
}

// PlayerModel.cs
using UnityEngine;

public class PlayerModel : IEntity
{
    public int MaxHealth = 100;
    public int Health { get; set; } = 100;
    public int Damage = 20;
    public float Range = 2f;
    public float AttackCooldown = 1f;
    public Vector2 Position;
    public float MovementSpeed = 10f;
    public float JumpHeight = 5f;
    public WeaponModel Weapon;
    public bool IsAlive { get; set; } = true;
    public bool IsActive { get; set; } = true;

    public PlayerModel() { }

    public void Die()
    {
        IsAlive = false;
        IsActive = false;
    }

    public void Equip(WeaponModel weapon)
    {
        Weapon = weapon;
        UpdateStats(/*Stats*/);
    }

    public void UpdateStats(/*Stats*/) { }
}

using System.Collections.Generic;
using UnityEngine;

public class RoomModel
{
    // System constants
    public static readonly int MIN_SIZE = 15;
    public static readonly int MAX_SIZE = 25;
    public static readonly int MIN_INSET = 2;
    public static readonly int MAX_INSET = 4;
    public static readonly int SPAWN_PADDING = 2;
    
    // Instance data
    public RectInt Bounds;
    public int ID;
    public List<RoomModel> ConnectedRooms = new();
    public RoomType Type;
    public RoomAccess State;
    public int DistanceFromEntrance;
    public bool IsRevealed;
    public bool IsCleared;
    public List<Vector2Int> SpawnPositions = new();

    public Vector2Int Center => new(
        (Bounds.xMin + Bounds.xMax) / 2,
        (Bounds.yMin + Bounds.yMax) / 2
    );

    public RoomModel(RectInt bounds, int id, RoomType type)
    {
        Bounds = bounds;
        ID = id;
        Type = type;
        State = GetDefaultStateForType(type);
        IsRevealed = type == RoomType.Entrance;
        IsCleared = type != RoomType.Combat && type != RoomType.Boss;
    }

    public bool ContainsPosition(Vector2Int position)
    {
        return position.x >= Bounds.xMin && position.x < Bounds.xMax &&
               position.y >= Bounds.yMin && position.y < Bounds.yMax;
    }

    private RoomAccess GetDefaultStateForType(RoomType type)
    {
        return type switch 
        { 
            RoomType.Combat or RoomType.Boss => RoomAccess.Closed, 
            _ => RoomAccess.Open 
        };
    }
}

using UnityEngine;

public readonly struct WallModel
{
    public readonly Vector2Int Position;

    public WallModel(Vector2Int position)
    {
        Position = position;
    }
}

// WeaponModel.cs
using System.Collections.Generic;
using UnityEngine;

public class WeaponModel
{
    public string Name;
    public WeaponRarity Rarity;

    public static List<WeaponModel> Weapons = new()
    {
        new("Iron Sword", WeaponRarity.Common),
        new("Stone Hammer", WeaponRarity.Common),
        new("Wooden Bow", WeaponRarity.Common),
        new("Sling", WeaponRarity.Common),
    };

    public WeaponModel(string name, WeaponRarity rarity)
    {
        Name = name;
        Rarity = rarity;
    }

    public WeaponModel GetWeaponByName(string name)
    {
        return Weapons.Find(weapon => weapon.Name == name);
    }

    public WeaponModel GetRandomWeaponByRarity(WeaponRarity rarity)
    {
        var filteredWeapons = Weapons.FindAll(weapon => weapon.Rarity == rarity);
        if (filteredWeapons.Count == 0) 
            return null;
        var randomIndex = Random.Range(0, filteredWeapons.Count);
        return filteredWeapons[randomIndex];
    }
}